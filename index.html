<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Sites - Plataforma Completa</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 <style>  
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    background: white;
    min-height: 100vh;
    box-shadow: 0 0 30px rgba(0,0,0,0.1);
}

/* Cabe√ßalho */
.header {
    background: #2c3e50;
    color: white;
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 1000;
}

.logo {
    display: flex;
    align-items: center;
    gap: 10px;
}

.logo i {
    font-size: 2rem;
    color: #3498db;
}

.logo h1 {
    font-size: 1.8rem;
}

.logo span {
    color: #3498db;
}

.nav {
    display: flex;
    gap: 20px;
}

.nav-link {
    color: white;
    text-decoration: none;
    padding: 10px 20px;
    border-radius: 5px;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 8px;
}

.nav-link:hover, .nav-link.active {
    background: #3498db;
    color: white;
}

/* Conte√∫do Principal */
.main-content {
    padding: 2rem;
}

.section {
    display: none;
    animation: fadeIn 0.5s;
}

.section.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Hero Section */
.hero {
    text-align: center;
    padding: 3rem 1rem;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 15px;
    margin-bottom: 2rem;
}

.hero h2 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: #2c3e50;
}

.subtitle {
    font-size: 1.2rem;
    color: #7f8c8d;
    margin-bottom: 2rem;
}

.features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
}

.feature-card {
    background: white;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    text-align: center;
    transition: transform 0.3s;
}

.feature-card:hover {
    transform: translateY(-5px);
}

.feature-card i {
    font-size: 3rem;
    color: #3498db;
    margin-bottom: 1rem;
}

/* Criador de Sites */
.site-creator {
    background: #f8f9fa;
    padding: 2rem;
    border-radius: 10px;
    margin-bottom: 2rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: bold;
    color: #2c3e50;
}

.form-control {
    width: 100%;
    padding: 10px;
    border: 2px solid #ddd;
    border-radius: 5px;
    font-size: 1rem;
    transition: border-color 0.3s;
}

.form-control:focus {
    border-color: #3498db;
    outline: none;
}

textarea.form-control {
    font-family: 'Courier New', monospace;
    resize: vertical;
}

.button-group {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    margin-top: 2rem;
}

/* Bot√µes */
.btn {
    padding: 12px 24px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1rem;
    font-weight: bold;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s;
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.btn-primary {
    background: #3498db;
    color: white;
}

.btn-secondary {
    background: #95a5a6;
    color: white;
}

.btn-success {
    background: #27ae60;
    color: white;
}

.btn-danger {
    background: #e74c3c;
    color: white;
}

.btn-warning {
    background: #f39c12;
    color: white;
}

.btn-info {
    background: #17a2b8;
    color: white;
}

.btn-lg {
    padding: 15px 30px;
    font-size: 1.1rem;
}

.btn-sm {
    padding: 8px 16px;
    font-size: 0.9rem;
}

/* Preview */
.preview-container {
    background: white;
    border: 2px solid #ddd;
    border-radius: 10px;
    padding: 1rem;
    margin-top: 2rem;
}

.preview-frame {
    width: 100%;
    height: 500px;
    border: 1px solid #ddd;
    border-radius: 5px;
    background: white;
}

/* Dashboard */
.stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.stat-card {
    background: white;
    padding: 1.5rem;
    border-radius: 10px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    gap: 1rem;
}

.stat-icon {
    background: #3498db;
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.stat-info h3 {
    font-size: 2rem;
    color: #2c3e50;
}

.stat-info p {
    color: #7f8c8d;
}

/* Grid de Sites */
.sites-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-top: 1rem;
}

.site-card {
    background: white;
    border: 1px solid #ddd;
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.3s;
}

.site-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}

.site-header {
    background: #3498db;
    color: white;
    padding: 1rem;
}

.site-body {
    padding: 1rem;
}

.site-footer {
    background: #f8f9fa;
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* API Section */
.api-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
}

.info-card {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 10px;
}

.api-table {
    width: 100%;
    border-collapse: collapse;
}

.api-table tr {
    border-bottom: 1px solid #ddd;
}

.api-table td {
    padding: 10px;
}

.api-table code {
    background: #2c3e50;
    color: #3498db;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: 'Courier New', monospace;
}

.server-controls {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    margin-bottom: 1.5rem;
}

.server-status {
    background: white;
    padding: 1rem;
    border-radius: 5px;
    margin-top: 1rem;
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 0.5rem;
}

.status-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #e74c3c;
}

.status-dot.online {
    background: #27ae60;
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

/* Console */
.console {
    background: #1e1e1e;
    color: #00ff00;
    padding: 1rem;
    border-radius: 5px;
    margin-top: 2rem;
    font-family: 'Courier New', monospace;
}

.console-output {
    height: 300px;
    overflow-y: auto;
    margin-bottom: 1rem;
    padding: 1rem;
    background: #2d2d2d;
    border-radius: 3px;
}

.log-entry {
    padding: 5px 0;
    border-bottom: 1px solid #444;
    font-size: 0.9rem;
}

/* Integra√ß√£o Java */
.java-integration {
    background: #f8f9fa;
    padding: 2rem;
    border-radius: 10px;
    margin-top: 2rem;
}

.api-controls {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    margin: 1rem 0;
}

.api-response {
    background: white;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 1rem;
    margin-top: 1rem;
}

.api-response pre {
    background: #2c3e50;
    color: #3498db;
    padding: 1rem;
    border-radius: 5px;
    overflow-x: auto;
    font-family: 'Courier New', monospace;
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
}

.modal-content {
    background: white;
    margin: 5% auto;
    padding: 2rem;
    border-radius: 10px;
    width: 80%;
    max-width: 800px;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
}

.close {
    position: absolute;
    right: 20px;
    top: 15px;
    font-size: 28px;
    cursor: pointer;
    color: #aaa;
}

.close:hover {
    color: #000;
}

/* Rodap√© */
.footer {
    background: #2c3e50;
    color: white;
    text-align: center;
    padding: 2rem;
    margin-top: 3rem;
}

.tech-icons {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 1rem;
    font-size: 1.5rem;
}

.tech-icons i {
    transition: transform 0.3s;
}

.tech-icons i:hover {
    transform: scale(1.2);
}

/* Responsividade */
@media (max-width: 768px) {
    .header {
        flex-direction: column;
        gap: 1rem;
    }
    
    .nav {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .features, .stats {
        grid-template-columns: 1fr;
    }
    
    .api-info {
        grid-template-columns: 1fr;
    }
    
    .button-group {
        flex-direction: column;
    }
    
    .btn {
        width: 100%;
        justify-content: center;
    }
    
    .modal-content {
        width: 95%;
        margin: 10% auto;
    }
}

/* Anima√ß√µes */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-100px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.feature-card:nth-child(1) { animation: slideIn 0.5s ease-out; }
.feature-card:nth-child(2) { animation: slideIn 0.5s ease-out 0.2s both; }
.feature-card:nth-child(3) { animation: slideIn 0.5s ease-out 0.4s both; }
 </style> 
    
</head>
<body>
    <div class="container">
        <!-- Cabe√ßalho -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-code"></i>
                <h1>Sistema<span>Sites</span></h1>
            </div>
            <nav class="nav">
                <a href="#home" class="nav-link active"><i class="fas fa-home"></i> Home</a>
                <a href="#criar" class="nav-link"><i class="fas fa-plus-circle"></i> Criar Site</a>
                <a href="#dashboard" class="nav-link"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                <a href="#api" class="nav-link"><i class="fas fa-server"></i> API Java</a>
            </nav>
        </header>

        <!-- Se√ß√£o Principal -->
        <main class="main-content">
            <section id="home" class="section active">
                <div class="hero">
                    <h2><i class="fas fa-rocket"></i> Plataforma Completa de Sites</h2>
                    <p class="subtitle">Frontend + Backend Java + Banco de Dados</p>
                    
                    <div class="features">
                        <div class="feature-card">
                            <i class="fas fa-desktop"></i>
                            <h3>Interface Web</h3>
                            <p>HTML5, CSS3 e JavaScript</p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-server"></i>
                            <h3>Backend Java</h3>
                            <p>API REST com servidor embutido</p>
                        </div>
                        <div class="feature-card">
                            <i class="fas fa-database"></i>
                            <h3>Banco de Dados</h3>
                            <p>Armazenamento JSON persistente</p>
                        </div>
                    </div>
                </div>

                <!-- Integra√ß√£o Java -->
                <div class="java-integration">
                    <h3><i class="fab fa-java"></i> Integra√ß√£o com Backend Java</h3>
                    <div class="api-controls">
                        <button onclick="startJavaServer()" class="btn btn-success">
                            <i class="fas fa-play"></i> Iniciar Servidor Java
                        </button>
                        <button onclick="testJavaAPI()" class="btn btn-info">
                            <i class="fas fa-bolt"></i> Testar API
                        </button>
                        <button onclick="listSitesFromJava()" class="btn btn-primary">
                            <i class="fas fa-list"></i> Listar Sites (Java)
                        </button>
                    </div>
                    
                    <div id="javaResponse" class="api-response">
                        <h4>Resposta da API Java:</h4>
                        <pre id="responseData">Aguardando a√ß√£o...</pre>
                    </div>
                </div>
            </section>

            <!-- Criador de Sites -->
            <section id="criar" class="section">
                <h2><i class="fas fa-magic"></i> Criar Novo Site</h2>
                
                <div class="site-creator">
                    <div class="form-group">
                        <label for="siteTitle"><i class="fas fa-heading"></i> T√≠tulo do Site</label>
                        <input type="text" id="siteTitle" class="form-control" 
                               placeholder="Digite o t√≠tulo do site" value="Meu Site Incr√≠vel">
                    </div>
                    
                    <div class="form-group">
                        <label for="siteAuthor"><i class="fas fa-user"></i> Autor</label>
                        <input type="text" id="siteAuthor" class="form-control" 
                               placeholder="Seu nome" value="Jo√£o Silva">
                    </div>
                    
                    <div class="form-group">
                        <label for="siteCategory"><i class="fas fa-tag"></i> Categoria</label>
                        <select id="siteCategory" class="form-control">
                            <option value="blog">Blog</option>
                            <option value="portfolio" selected>Portf√≥lio</option>
                            <option value="business">Neg√≥cios</option>
                            <option value="personal">Pessoal</option>
                            <option value="ecommerce">Loja Virtual</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="siteContent"><i class="fas fa-edit"></i> Conte√∫do HTML</label>
                        <textarea id="siteContent" class="form-control" rows="12">

                        </textarea>
                    </div>
                    
                    <div class="button-group">
                        <button onclick="previewSite()" class="btn btn-warning">
                            <i class="fas fa-eye"></i> Visualizar
                        </button>
                        <button onclick="saveSite()" class="btn btn-primary">
                            <i class="fas fa-save"></i> Salvar Localmente
                        </button>
                        <button onclick="sendToJava()" class="btn btn-success">
                            <i class="fab fa-java"></i> Salvar no Java
                        </button>
                        <button onclick="publishSite()" class="btn btn-danger">
                            <i class="fas fa-paper-plane"></i> Publicar
                        </button>
                    </div>
                </div>
                
                <!-- Preview -->
                <div class="preview-container">
                    <h3><i class="fas fa-desktop"></i> Preview do Site</h3>
                    <iframe id="sitePreview" class="preview-frame"></iframe>
                </div>
            </section>

            <!-- Dashboard -->
            <section id="dashboard" class="section">
                <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-file-code"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalSites">0</h3>
                            <p>Sites Criados</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="javaStatus">Offline</h3>
                            <p>Status Java</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-folder"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="fileCount">0</h3>
                            <p>Arquivos</p>
                        </div>
                    </div>
                </div>
                
                <!-- Lista de Sites -->
                <div class="sites-list">
                    <h3><i class="fas fa-list"></i> Meus Sites</h3>
                    <div id="sitesContainer" class="sites-grid">
                        <!-- Sites ser√£o carregados dinamicamente -->
                    </div>
                </div>
            </section>

            <!-- API Java -->
            <section id="api" class="section">
                <h2><i class="fas fa-server"></i> API Java Backend</h2>
                
                <div class="api-info">
                    <div class="info-card">
                        <h3><i class="fas fa-plug"></i> Endpoints da API</h3>
                        <table class="api-table">
                            <tr>
                                <td><code>GET /api/sites</code></td>
                                <td>Listar todos os sites</td>
                            </tr>
                            <tr>
                                <td><code>POST /api/sites</code></td>
                                <td>Criar novo site</td>
                            </tr>
                            <tr>
                                <td><code>GET /api/sites/{id}</code></td>
                                <td>Buscar site espec√≠fico</td>
                            </tr>
                            <tr>
                                <td><code>PUT /api/sites/{id}</code></td>
                                <td>Atualizar site</td>
                            </tr>
                            <tr>
                                <td><code>DELETE /api/sites/{id}</code></td>
                                <td>Excluir site</td>
                            </tr>
                            <tr>
                                <td><code>GET /api/stats</code></td>
                                <td>Estat√≠sticas do sistema</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="info-card">
                        <h3><i class="fas fa-cogs"></i> Controles do Servidor</h3>
                        <div class="server-controls">
                            <button onclick="startJavaServer()" class="btn btn-lg btn-success">
                                <i class="fas fa-play-circle"></i> Iniciar Servidor
                            </button>
                            <button onclick="stopJavaServer()" class="btn btn-lg btn-danger">
                                <i class="fas fa-stop-circle"></i> Parar Servidor
                            </button>
                            <button onclick="clearJavaData()" class="btn btn-lg btn-warning">
                                <i class="fas fa-trash"></i> Limpar Dados
                            </button>
                        </div>
                        
                        <div class="server-status">
                            <h4>Status do Servidor:</h4>
                            <div class="status-indicator">
                                <span class="status-dot" id="serverDot"></span>
                                <span id="serverStatusText">Servidor Java n√£o iniciado</span>
                            </div>
                            <p id="serverPort">Porta: N√£o configurada</p>
                        </div>
                    </div>
                </div>
                
                <!-- Console de Logs -->
                <div class="console">
                    <h3><i class="fas fa-terminal"></i> Console de Logs</h3>
                    <div id="javaConsole" class="console-output">
                        <div class="log-entry">Bem-vindo ao Sistema de Sites Integrado!</div>
                        <div class="log-entry">Pronto para conectar com o backend Java.</div>
                    </div>
                    <button onclick="clearConsole()" class="btn btn-sm btn-secondary">
                        <i class="fas fa-broom"></i> Limpar Console
                    </button>
                </div>
            </section>
        </main>

        <!-- Rodap√© -->
        <footer class="footer">
            <p>Sistema de Sites Integrado &copy; 2024</p>
            <p>Frontend: HTML/CSS/JS | Backend: Java | Banco de Dados: JSON</p>
            <div class="tech-icons">
                <i class="fab fa-html5" title="HTML5"></i>
                <i class="fab fa-css3-alt" title="CSS3"></i>
                <i class="fab fa-js-square" title="JavaScript"></i>
                <i class="fab fa-java" title="Java"></i>
                <i class="fas fa-database" title="Banco de Dados"></i>
            </div>
        </footer>
    </div>

    <!-- Modal para detalhes do site -->
    <div id="siteModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle"></h2>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Sistema de Sites Integrado - JavaScript

class SiteManager {
    constructor() {
        this.sites = JSON.parse(localStorage.getItem('sites')) || [];
        this.javaServerUrl = 'http://localhost:8080';
        this.isJavaServerRunning = false;
        this.init();
    }

    init() {
        // Navega√ß√£o
        this.setupNavigation();
        
        // Inicializar valores
        this.updateStats();
        this.loadSites();
        
        // Testar conex√£o Java
        this.testJavaConnection();
        
        // Atualizar preview em tempo real
        this.setupLivePreview();
    }

    setupNavigation() {
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.section');
        
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                
                // Atualizar link ativo
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                // Mostrar se√ß√£o correspondente
                sections.forEach(section => {
                    section.classList.remove('active');
                    if (section.id === targetId) {
                        section.classList.add('active');
                    }
                });
                
                // Scroll para topo
                window.scrollTo(0, 0);
            });
        });
    }

    setupLivePreview() {
        const titleInput = document.getElementById('siteTitle');
        const contentInput = document.getElementById('siteContent');
        const categorySelect = document.getElementById('siteCategory');
        
        const updatePreview = () => {
            const title = titleInput.value || 'Sem t√≠tulo';
            const content = contentInput.value;
            const category = categorySelect.value;
            
            // Atualizar elementos de preview
            document.getElementById('previewTitle').textContent = title;
            document.getElementById('previewCategory').textContent = category;
            document.getElementById('previewContent').innerHTML = content;
            
            // Atualizar estat√≠sticas
            this.updateContentStats(content);
        };
        
        // Event listeners para atualiza√ß√£o em tempo real
        titleInput.addEventListener('input', updatePreview);
        contentInput.addEventListener('input', updatePreview);
        categorySelect.addEventListener('change', updatePreview);
        
        // Atualizar inicial
        updatePreview();
    }

    updateContentStats(content) {
        const charCount = content.length;
        const wordCount = content.trim().split(/\s+/).filter(w => w.length > 0).length;
        const lineCount = content.split('\n').length;
        
        document.getElementById('charCount').textContent = charCount;
        document.getElementById('wordCount').textContent = wordCount;
        document.getElementById('lineCount').textContent = lineCount;
    }

    updateStats() {
        document.getElementById('totalSites').textContent = this.sites.length;
        document.getElementById('fileCount').textContent = this.sites.length;
        
        // Atualizar status Java
        const statusDot = document.getElementById('serverDot');
        const statusText = document.getElementById('serverStatusText');
        const serverPort = document.getElementById('serverPort');
        
        if (this.isJavaServerRunning) {
            statusDot.classList.add('online');
            statusText.textContent = 'Servidor Java Online';
            document.getElementById('javaStatus').textContent = 'Online';
            serverPort.textContent = `Porta: 8080`;
        } else {
            statusDot.classList.remove('online');
            statusText.textContent = 'Servidor Java Offline';
            document.getElementById('javaStatus').textContent = 'Offline';
            serverPort.textContent = `Porta: N√£o dispon√≠vel`;
        }
    }

    loadSites() {
        const container = document.getElementById('sitesContainer');
        if (this.sites.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-folder-open fa-3x"></i>
                    <p>Nenhum site salvo ainda</p>
                </div>
            `;
            return;
        }
        
        container.innerHTML = this.sites.map((site, index) => `
            <div class="site-card">
                <div class="site-header">
                    <h3>${site.title}</h3>
                    <small>${site.category} ‚Ä¢ ${new Date(site.createdAt).toLocaleDateString()}</small>
                </div>
                <div class="site-body">
                    <p><strong>Autor:</strong> ${site.author}</p>
                    <p><strong>Status:</strong> ${site.published ? 'Publicado' : 'Rascunho'}</p>
                </div>
                <div class="site-footer">
                    <button onclick="siteManager.viewSite(${index})" class="btn btn-sm btn-primary">
                        <i class="fas fa-eye"></i> Ver
                    </button>
                    <button onclick="siteManager.editSite(${index})" class="btn btn-sm btn-warning">
                        <i class="fas fa-edit"></i> Editar
                    </button>
                    <button onclick="siteManager.deleteSite(${index})" class="btn btn-sm btn-danger">
                        <i class="fas fa-trash"></i> Excluir
                    </button>
                </div>
            </div>
        `).join('');
    }

    // Opera√ß√µes CRUD Locais
    saveSite() {
        const title = document.getElementById('siteTitle').value;
        const author = document.getElementById('siteAuthor').value;
        const category = document.getElementById('siteCategory').value;
        const content = document.getElementById('siteContent').value;
        
        if (!title || !content) {
            this.showNotification('Preencha t√≠tulo e conte√∫do!', 'error');
            return;
        }
        
        const site = {
            id: Date.now(),
            title,
            author,
            category,
            content,
            published: false,
            createdAt: new Date().toISOString(),
            updatedAt: new Date().toISOString()
        };
        
        this.sites.push(site);
        localStorage.setItem('sites', JSON.stringify(this.sites));
        
        this.showNotification('Site salvo localmente com sucesso!', 'success');
        this.updateStats();
        this.loadSites();
    }

    viewSite(index) {
        const site = this.sites[index];
        const modal = document.getElementById('siteModal');
        const title = document.getElementById('modalTitle');
        const content = document.getElementById('modalContent');
        
        title.textContent = site.title;
        content.innerHTML = `
            <div class="site-details">
                <p><strong>Autor:</strong> ${site.author}</p>
                <p><strong>Categoria:</strong> ${site.category}</p>
                <p><strong>Criado em:</strong> ${new Date(site.createdAt).toLocaleString()}</p>
                <hr>
                <h4>Conte√∫do:</h4>
                <div class="site-content-preview">
                    <iframe srcdoc="${site.content}" style="width:100%; height:300px; border:none;"></iframe>
                </div>
            </div>
        `;
        
        modal.style.display = 'block';
    }

    editSite(index) {
        const site = this.sites[index];
        
        // Preencher formul√°rio com dados do site
        document.getElementById('siteTitle').value = site.title;
        document.getElementById('siteAuthor').value = site.author;
        document.getElementById('siteCategory').value = site.category;
        document.getElementById('siteContent').value = site.content;
        
        // Ir para se√ß√£o de cria√ß√£o
        document.querySelector('a[href="#criar"]').click();
        
        this.showNotification(`Editando: ${site.title}`, 'info');
    }

    deleteSite(index) {
        if (confirm('Tem certeza que deseja excluir este site?')) {
            this.sites.splice(index, 1);
            localStorage.setItem('sites', JSON.stringify(this.sites));
            this.showNotification('Site exclu√≠do com sucesso!', 'success');
            this.updateStats();
            this.loadSites();
        }
    }

    previewSite() {
        const content = document.getElementById('siteContent').value;
        const iframe = document.getElementById('sitePreview');
        
        iframe.srcdoc = content || '<h1>Digite algum conte√∫do para visualizar</h1>';
    }

    publishSite() {
        const title = document.getElementById('siteTitle').value;
        const content = document.getElementById('siteContent').value;
        
        if (!title || !content) {
            this.showNotification('Preencha t√≠tulo e conte√∫do!', 'error');
            return;
        }
        
        // Criar arquivo HTML
        const html = `
            <!DOCTYPE html>
            <html lang="pt-BR">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>${title}</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        max-width: 800px;
                        margin: 0 auto;
                        padding: 20px;
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                    }
                    .container {
                        background: white;
                        color: #333;
                        padding: 2rem;
                        border-radius: 15px;
                        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    }
                    .header {
                        text-align: center;
                        margin-bottom: 2rem;
                        padding-bottom: 1rem;
                        border-bottom: 2px solid #667eea;
                    }
                    .footer {
                        text-align: center;
                        margin-top: 2rem;
                        padding-top: 1rem;
                        border-top: 1px solid #ddd;
                        color: #666;
                        font-size: 0.9rem;
                    }
                </style>
            </head>
            <body>
                <div class="container">
                    <div class="header">
                        <h1>${title}</h1>
                        <p>Site publicado pela Plataforma Integrada</p>
                    </div>
                    <div class="content">
                        ${content}
                    </div>
                    <div class="footer">
                        <p>Publicado em: ${new Date().toLocaleDateString()}</p>
                    </div>
                </div>
            </body>
            </html>
        `;
        
        // Criar e baixar arquivo
        const blob = new Blob([html], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `${title.toLowerCase().replace(/\s+/g, '-')}.html`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        this.showNotification(`Site "${title}" publicado e baixado!`, 'success');
    }

    // Integra√ß√£o com Java Backend
    async testJavaConnection() {
        try {
            const response = await fetch(`${this.javaServerUrl}/api/health`, {
                method: 'GET',
                headers: { 'Content-Type': 'application/json' }
            });
            
            if (response.ok) {
                this.isJavaServerRunning = true;
                this.showNotification('Conex√£o com Java estabelecida!', 'success');
                this.addLog('‚úÖ Servidor Java conectado com sucesso');
            } else {
                this.isJavaServerRunning = false;
                this.addLog('‚ö†Ô∏è Servidor Java n√£o respondeu');
            }
        } catch (error) {
            this.isJavaServerRunning = false;
            this.addLog('‚ùå Erro ao conectar com Java: ' + error.message);
        } finally {
            this.updateStats();
        }
    }

    async startJavaServer() {
        this.addLog('üöÄ Iniciando servidor Java...');
        
        try {
            // Em um sistema real, isso chamaria um processo Java
            // Aqui simulamos a inicializa√ß√£o
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            this.isJavaServerRunning = true;
            this.updateStats();
            this.showNotification('Servidor Java iniciado!', 'success');
            this.addLog('‚úÖ Servidor Java iniciado na porta 8080');
            
            // Mostrar resposta da API
            document.getElementById('responseData').textContent = JSON.stringify({
                status: 'success',
                message: 'Servidor Java iniciado',
                port: 8080,
                timestamp: new Date().toISOString()
            }, null, 2);
            
        } catch (error) {
            this.addLog('‚ùå Falha ao iniciar servidor Java: ' + error.message);
            this.showNotification('Erro ao iniciar servidor!', 'error');
        }
    }

    async stopJavaServer() {
        this.addLog('üõë Parando servidor Java...');
        
        try {
            await new Promise(resolve => setTimeout(resolve, 1000));
            this.isJavaServerRunning = false;
            this.updateStats();
            this.showNotification('Servidor Java parado!', 'info');
            this.addLog('‚úÖ Servidor Java parado');
        } catch (error) {
            this.addLog('‚ùå Erro ao parar servidor: ' + error.message);
        }
    }

    async sendToJava() {
        const title = document.getElementById('siteTitle').value;
        const author = document.getElementById('siteAuthor').value;
        const category = document.getElementById('siteCategory').value;
        const content = document.getElementById('siteContent').value;
        
        if (!title || !content) {
            this.showNotification('Preencha t√≠tulo e conte√∫do!', 'error');
            return;
        }
        
        const siteData = {
            title,
            author,
            category,
            content,
            published: false,
            createdAt: new Date().toISOString()
        };
        
        this.addLog('üì§ Enviando site para Java...');
        
        try {
            // Simula√ß√£o de envio para API Java
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            this.addLog(`‚úÖ Site "${title}" enviado para Java`);
            this.showNotification('Site salvo no backend Java!', 'success');
            
            // Mostrar resposta simulada
            document.getElementById('responseData').textContent = JSON.stringify({
                status: 'success',
                message: 'Site salvo no backend Java',
                data: {
                    id: Date.now(),
                    ...siteData
                },
                timestamp: new Date().toISOString()
            }, null, 2);
            
        } catch (error) {
            this.addLog('‚ùå Erro ao enviar para Java: ' + error.message);
            this.showNotification('Erro ao conectar com Java!', 'error');
        }
    }

    async listSitesFromJava() {
        this.addLog('üìã Buscando sites do Java...');
        
        try {
            // Simula√ß√£o de resposta da API
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            const mockData = {
                sites: [
                    {
                        id: 1,
                        title: 'Site de Exemplo do Java',
                        author: 'Sistema Java',
                        category: 'demo',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: 2,
                        title: 'Blog Tecnol√≥gico',
                        author: 'Dev Java',
                        category: 'blog',
                        createdAt: new Date().toISOString()
                    }
                ],
                total: 2,
                timestamp: new Date().toISOString()
            };
            
            this.addLog(`‚úÖ Encontrados ${mockData.sites.length} sites no Java`);
            
            // Mostrar resposta
            const responseData = document.getElementById('responseData');
            responseData.textContent = JSON.stringify(mockData, null, 2);
            
            // Atualizar interface com sites do Java
            this.displayJavaSites(mockData.sites);
            
        } catch (error) {
            this.addLog('‚ùå Erro ao buscar sites do Java: ' + error.message);
        }
    }

    displayJavaSites(sites) {
        const container = document.getElementById('sitesContainer');
        if (!sites || sites.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <i class="fas fa-server fa-3x"></i>
                    <p>Nenhum site no servidor Java</p>
                </div>
            `;
            return;
        }
        
        container.innerHTML = sites.map(site => `
            <div class="site-card">
                <div class="site-header" style="background: #27ae60;">
                    <h3>${site.title}</h3>
                    <small>${site.category} ‚Ä¢ Servidor Java</small>
                </div>
                <div class="site-body">
                    <p><strong>Autor:</strong> ${site.author}</p>
                    <p><strong>Fonte:</strong> Backend Java</p>
                </div>
                <div class="site-footer">
                    <button class="btn btn-sm btn-success">
                        <i class="fas fa-download"></i> Importar
                    </button>
                </div>
            </div>
        `).join('');
    }

    testJavaAPI() {
        this.addLog('üß™ Testando API Java...');
        
        // Simula√ß√£o de teste de API
        setTimeout(() => {
            this.addLog('‚úÖ Teste de API completado');
            
            document.getElementById('responseData').textContent = JSON.stringify({
                status: 'success',
                endpoints: [
                    { method: 'GET', path: '/api/sites', description: 'Listar sites' },
                    { method: 'POST', path: '/api/sites', description: 'Criar site' },
                    { method: 'GET', path: '/api/health', description: 'Status do servidor' },
                    { method: 'GET', path: '/api/stats', description: 'Estat√≠sticas' }
                ],
                serverInfo: {
                    javaVersion: '17',
                    framework: 'Embedded HTTP Server',
                    uptime: '5 minutos',
                    memory: '128MB usado'
                }
            }, null, 2);
        }, 1000);
    }

    clearJavaData() {
        if (confirm('Limpar todos os dados do backend Java?')) {
            this.addLog('üóëÔ∏è Limpando dados do Java...');
            setTimeout(() => {
                this.addLog('‚úÖ Dados do Java limpos');
                document.getElementById('responseData').textContent = 'Dados limpos com sucesso';
            }, 1000);
        }
    }

    // Utilit√°rios
    addLog(message) {
        const console = document.getElementById('javaConsole');
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
        console.appendChild(entry);
        console.scrollTop = console.scrollHeight;
    }

    clearConsole() {
        document.getElementById('javaConsole').innerHTML = `
            <div class="log-entry">Console limpo</div>
            <div class="log-entry">Pronto para novas opera√ß√µes</div>
        `;
    }

    showNotification(message, type = 'info') {
        // Criar elemento de notifica√ß√£o
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
            <i class="fas fa-${type === 'success' ? 'check-circle' : 
                               type === 'error' ? 'exclamation-circle' : 
                               'info-circle'}"></i>
            <span>${message}</span>
        `;
        
        // Estilos da notifica√ß√£o
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: ${type === 'success' ? '#27ae60' : 
                         type === 'error' ? '#e74c3c' : '#3498db'};
            color: white;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.3s ease-out;
        `;
        
        document.body.appendChild(notification);
        
        // Remover ap√≥s 3 segundos
        setTimeout(() => {
            notification.style.animation = 'slideOut 0.3s ease-in';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
        
        // Adicionar anima√ß√£o de sa√≠da
        if (!document.querySelector('#notification-styles')) {
            const style = document.createElement('style');
            style.id = 'notification-styles';
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }
    }

    closeModal() {
        document.getElementById('siteModal').style.display = 'none';
    }
}

// Instanciar e inicializar o sistema
const siteManager = new SiteManager();

// Expor fun√ß√µes para o escopo global
window.siteManager = siteManager;
window.startJavaServer = () => siteManager.startJavaServer();
window.stopJavaServer = () => siteManager.stopJavaServer();
window.testJavaAPI = () => siteManager.testJavaAPI();
window.listSitesFromJava = () => siteManager.listSitesFromJava();
window.clearJavaData = () => siteManager.clearJavaData();
window.previewSite = () => siteManager.previewSite();
window.saveSite = () => siteManager.saveSite();
window.sendToJava = () => siteManager.sendToJava();
window.publishSite = () => siteManager.publishSite();
window.clearConsole = () => siteManager.clearConsole();
window.closeModal = () => siteManager.closeModal();

// Adicionar evento de teclado para ESC fechar modal
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        siteManager.closeModal();
    }
});

// Fechar modal ao clicar fora
window.onclick = (event) => {
    const modal = document.getElementById('siteModal');
    if (event.target === modal) {
        siteManager.closeModal();
    }
};

// Adicionar estilo para notifica√ß√µes
document.addEventListener('DOMContentLoaded', () => {
    const style = document.createElement('style');
    style.textContent = `
        .notification {
            font-family: 'Segoe UI', sans-serif;
            font-weight: 500;
        }
        .notification i {
            font-size: 1.2rem;
        }
    `;
    document.head.appendChild(style);
});
    </script>
</body>
</html>
